# ITLabs — Руководство разработчика

Добро пожаловать в ITLabs! Это руководство поможет тебе разобраться с нашими инструментами разработки.

## Содержание

1. [Что такое GitHub и зачем он нужен](#1-что-такое-github-и-зачем-он-нужен)
2. [Что такое Sentry и зачем он нужен](#2-что-такое-sentry-и-зачем-он-нужен)
3. [Начало работы](#3-начало-работы)
4. [Работа с Git и GitHub](#4-работа-с-git-и-github)
5. [Правила оформления репозиториев](#5-правила-оформления-репозиториев)
6. [Работа с Sentry](#6-работа-с-sentry)
7. [Интеграция GitHub + Sentry](#7-интеграция-github--sentry)
8. [Частые вопросы (FAQ)](#8-частые-вопросы-faq)

---

## 1. Что такое GitHub и зачем он нужен

### Простыми словами

**GitHub** — это облачное хранилище для кода с системой контроля версий. Представь Google Docs, но для программистов:
- Весь код хранится в одном месте
- Видна история всех изменений (кто, когда и что изменил)
- Можно откатиться к любой предыдущей версии
- Несколько человек могут работать над одним проектом одновременно

### Основные понятия

| Термин | Что это |
|--------|---------|
| **Репозиторий (repo)** | Папка с проектом на GitHub |
| **Коммит (commit)** | Сохранение изменений с описанием что сделано |
| **Ветка (branch)** | Параллельная версия кода для разработки фичи |
| **Pull Request (PR)** | Запрос на добавление твоих изменений в основной код |
| **Clone** | Скачать репозиторий на свой компьютер |
| **Push** | Отправить свои изменения на GitHub |
| **Pull** | Скачать чужие изменения с GitHub |

### Наша организация

Мы используем GitHub Organization **IT-Labs-Top**:
- URL: https://github.com/IT-Labs-Top
- Все проекты компании хранятся здесь
- Доступ к проектам зависит от твоей команды

---

## 2. Что такое Sentry и зачем он нужен

### Простыми словами

**Sentry** — это система мониторинга ошибок. Когда в приложении происходит ошибка:
1. Sentry автоматически её ловит
2. Записывает всю информацию (стек вызовов, данные пользователя, браузер и т.д.)
3. Отправляет уведомление разработчикам
4. Группирует одинаковые ошибки вместе

### Зачем это нужно

**Без Sentry:**
- Пользователь видит ошибку → уходит → ты не знаешь что случилось
- Баги обнаруживаются случайно или по жалобам

**С Sentry:**
- Ошибка происходит → ты сразу получаешь уведомление в Telegram
- Видишь точное место в коде где упало
- Видишь сколько пользователей затронуто
- Можешь быстро исправить

### Наш Sentry

- URL: https://sentry.itlabs.top
- Вход через GitHub (SSO)
- Уведомления приходят в Telegram-бот

---

## 3. Начало работы

### Шаг 1: Получи доступ к GitHub

1. Создай аккаунт на https://github.com (если ещё нет)
2. Сообщи свой GitHub username менеджеру
3. Прими приглашение в организацию IT-Labs-Top (придёт на email)

### Шаг 2: Настрой Git на компьютере

**Установка Git:**
- Windows: скачай с https://git-scm.com/download/win
- Mac: `brew install git`
- Linux: `sudo apt install git`

**Настройка (используй тот же email что на GitHub):**
```bash
git config --global user.name "Твоё Имя"
git config --global user.email "твой@email.com"
```

### Шаг 3: Настрой SSH-ключ (рекомендуется)

SSH-ключ позволяет не вводить пароль при каждом push/pull.

**Генерация ключа:**
```bash
ssh-keygen -t ed25519 -C "твой@email.com"
```
Нажимай Enter на все вопросы (можно без пароля).

**Копирование публичного ключа:**
```bash
# Windows (Git Bash)
cat ~/.ssh/id_ed25519.pub | clip

# Mac
cat ~/.ssh/id_ed25519.pub | pbcopy

# Linux
cat ~/.ssh/id_ed25519.pub
# и скопируй вручную
```

**Добавление ключа на GitHub:**
1. Зайди на https://github.com/settings/keys
2. Нажми "New SSH key"
3. Title: любое название (например "Рабочий ноутбук")
4. Key: вставь скопированный ключ
5. Нажми "Add SSH key"

**Проверка:**
```bash
ssh -T git@github.com
# Должно вывести: Hi username! You have successfully authenticated...
```

### Шаг 4: Войди в Sentry

1. Открой https://sentry.itlabs.top
2. Нажми "Continue with GitHub"
3. Разреши доступ
4. Готово!

### Шаг 5: Подключи Telegram-уведомления

1. Найди в Telegram бота: **@itlabs_sentry_bot**
2. Нажми "Запустить" или отправь `/start`
3. Нажми кнопку "Зарегистрироваться"
4. Введи свой email (тот же что в Sentry)
5. Готово — теперь ошибки твоих проектов будут приходить в Telegram

---

## 4. Работа с Git и GitHub

### Базовый рабочий процесс

**1. Клонирование репозитория (один раз для каждого проекта):**
```bash
git clone git@github.com:IT-Labs-Top/название-проекта.git
cd название-проекта
```

**2. Перед началом работы — получи свежие изменения:**
```bash
git pull
```

**3. Создай ветку для своей задачи:**
```bash
git checkout -b feature/название-фичи
```

**4. Пиши код...**

**5. Посмотри что изменилось:**
```bash
git status          # список изменённых файлов
git diff            # что именно изменилось
```

**6. Добавь файлы в коммит:**
```bash
git add .                    # добавить все файлы
git add file.py              # добавить конкретный файл
git add src/                 # добавить папку
```

**7. Сделай коммит:**
```bash
git commit -m "Добавил форму авторизации"
```

**8. Отправь на GitHub:**
```bash
git push -u origin feature/название-фичи
```

**9. Создай Pull Request на GitHub** (см. ниже)

### Правила написания коммитов

Хороший коммит = понятное сообщение о том, ЧТО сделано.

**Хорошие примеры:**
```
Добавил валидацию email в форме регистрации
Исправил падение при пустом списке товаров
Обновил зависимости до актуальных версий
Удалил неиспользуемый код авторизации
```

**Плохие примеры:**
```
fix
update
asdfg
работает
```

**Формат:**
- Пиши на русском или английском (как принято в проекте)
- Начинай с глагола: "Добавил", "Исправил", "Удалил", "Обновил"
- Кратко, но понятно (50-70 символов идеально)

### Работа с ветками

| Тип ветки | Пример | Когда использовать |
|-----------|--------|-------------------|
| `main` / `master` | main | Основной код, идёт на production |
| `develop` | develop | Ветка разработки (если есть) |
| `feature/*` | feature/user-auth | Новая функциональность |
| `fix/*` | fix/login-crash | Исправление бага |
| `hotfix/*` | hotfix/critical-bug | Срочное исправление на проде |

**Переключение между ветками:**
```bash
git checkout main              # переключиться на main
git checkout feature/my-task   # переключиться на свою ветку
git checkout -b feature/new    # создать и переключиться
```

### Pull Request (PR)

Pull Request — это запрос на слияние твоей ветки с основной. Позволяет:
- Показать свои изменения коллегам
- Получить код-ревью
- Обсудить решение перед мержем

**Как создать PR:**
1. Зайди в репозиторий на GitHub
2. Увидишь плашку "Compare & pull request" — нажми
3. Или: вкладка "Pull requests" → "New pull request"
4. Выбери свою ветку
5. Заполни описание:
   - Что сделано
   - Как тестировать
   - Скриншоты (если есть UI)
6. Назначь reviewer (если нужно)
7. Нажми "Create pull request"

**После создания PR:**
- Дождись код-ревью (если требуется)
- Исправь замечания (если есть)
- После одобрения — нажми "Merge pull request"

---

## 5. Правила оформления репозиториев

### При создании нового репозитория

**1. Название (Repository name):**
- На английском языке
- Осмысленное название проекта
- Без префиксов (front_, back_ и т.д.)
- Слова через дефис

Примеры:
- `museum-navigation`
- `photo-booth-app`
- `memory-book-lukoil`

**2. Описание (Description):**
- На русском языке
- Название проекта / заказчика
- Краткое описание

Пример: "Навигация для краеведческого музея г. Кукмор"

**3. Topics (теги) — ОБЯЗАТЕЛЬНО:**

После создания репозитория добавь теги для идентификации типа проекта:

| Тег | Когда использовать |
|-----|-------------------|
| `backend` | Бэкенд, API, сервисы |
| `frontend` | Веб-интерфейсы, сайты |
| `interactive` | Киоски, интерактивные выставки |
| `mobile` | Мобильные приложения |

Дополнительные теги (по желанию):
- **Технологии:** `python`, `fastapi`, `django`, `react`, `vue`, `nextjs`, `csharp`, `unity`
- **Статус:** `production`, `archive`, `prototype`

**Как добавить Topics:**
1. Открой репозиторий на GitHub
2. Справа найди секцию "About"
3. Нажми на шестерёнку (⚙️)
4. В поле "Topics" введи теги через пробел
5. Нажми "Save changes"

---

## 6. Работа с Sentry

### Первый вход

1. Открой https://sentry.itlabs.top
2. Нажми "Continue with GitHub"
3. Разреши доступ

### Интерфейс Sentry

**Главное меню (слева):**
- **Issues** — список ошибок (основной раздел)
- **Projects** — список проектов
- **Alerts** — настройка уведомлений
- **Settings** — настройки

### Раздел Issues (Ошибки)

Это главный раздел — здесь все ошибки твоих приложений.

**Что показывает каждая ошибка:**
- **Название** — текст/тип ошибки
- **Culprit** — файл и функция где произошла ошибка
- **Events** — сколько раз произошла
- **Users** — сколько пользователей затронуто
- **Graph** — частота ошибки по времени

### Статусы ошибок

| Статус | Значок | Что означает |
|--------|--------|--------------|
| **Unresolved** | Красный | Новая или открытая ошибка, нужно исправить |
| **Resolved** | Зелёный | Ошибка исправлена |
| **Ignored** | Серый | Ошибка игнорируется (не критична) |

### Как анализировать ошибку

**1. Открой ошибку** — кликни на неё в списке

**2. Stack Trace** — путь выполнения кода:
```
Error: Cannot read property 'name' of undefined
    at getUser (src/services/user.js:45:12)      ← здесь упало
    at handleRequest (src/api/handler.js:23:5)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
```
Читай снизу вверх — самая верхняя строка это место ошибки.

**3. Breadcrumbs** — что происходило до ошибки:
- Какие запросы делал пользователь
- На какие кнопки нажимал
- Console.log сообщения

**4. Tags** — контекст:
- Браузер пользователя
- Операционная система
- URL страницы
- Версия приложения

### Как закрыть ошибку

**Вариант 1: Вручную в Sentry**
1. Открой ошибку
2. Нажми "Resolve" (зелёная кнопка)

**Вариант 2: Автоматически через коммит** (рекомендуется)
- Добавь в сообщение коммита `Fixes ПРОЕКТ-ID`
- Подробнее в разделе "Интеграция GitHub + Sentry"

### Как игнорировать ошибку

Если ошибка не критична или это известная проблема:
1. Открой ошибку
2. Нажми "Ignore"
3. Выбери условие:
   - Ignore forever — навсегда
   - Ignore for 24h/1 week — на время
   - Ignore until X events — до N повторений

---

## 7. Интеграция GitHub + Sentry

### Что даёт интеграция

1. **Ссылки на код** — в ошибке Sentry можно кликнуть на файл и открыть его в GitHub
2. **Автозакрытие ошибок** — коммит может автоматически закрыть ошибку
3. **Отслеживание регрессий** — видно какой коммит сломал код
4. **Suspect Commits** — Sentry показывает подозрительные коммиты

### Автоматическое закрытие ошибок через коммиты

Самый удобный способ закрывать ошибки — через коммит. Добавь в сообщение коммита специальную команду:

```
Fixes ПРОЕКТ-ID
```

**Полный пример:**
```bash
git commit -m "Исправил падение при пустом email

Fixes INTERNAL-1A2B"
```

После пуша этого коммита, ошибка INTERNAL-1A2B автоматически станет Resolved.

### Где найти ID ошибки

**Способ 1: В URL**
```
https://sentry.itlabs.top/organizations/itlabs/issues/INTERNAL-1A2B/
                                                       ^^^^^^^^^^^
                                                       ID ошибки
```

**Способ 2: В заголовке ошибки**

Открой ошибку — ID показан рядом с названием.

**Способ 3: В Telegram-уведомлении**

Бот присылает ссылку на ошибку — ID есть в ссылке.

### Ключевые слова для закрытия

Любое из этих слов работает:
- `Fixes ПРОЕКТ-ID`
- `Fixed ПРОЕКТ-ID`
- `Fix ПРОЕКТ-ID`
- `Closes ПРОЕКТ-ID`
- `Close ПРОЕКТ-ID`
- `Resolves ПРОЕКТ-ID`
- `Resolve ПРОЕКТ-ID`

### Закрытие нескольких ошибок

Можно закрыть несколько ошибок одним коммитом:

```bash
git commit -m "Рефакторинг обработки ошибок API

Fixes INTERNAL-1A2B
Fixes INTERNAL-3C4D
Fixes INTERNAL-5E6F"
```

### Пример полного рабочего процесса

1. Получаешь уведомление в Telegram об ошибке
2. Кликаешь на ссылку → открывается Sentry
3. Анализируешь Stack Trace, находишь причину
4. Исправляешь код
5. Делаешь коммит с `Fixes ПРОЕКТ-ID`
6. Пушишь
7. Ошибка автоматически закрывается в Sentry

---

## 8. Частые вопросы (FAQ)

### Git и GitHub

**Q: Я не вижу репозиторий в списке организации**

A: Ты не добавлен в команду, которая имеет доступ к этому репозиторию. Обратись к менеджеру.

---

**Q: Мой push отклонён (rejected)**

A: Кто-то запушил изменения раньше тебя. Выполни:
```bash
git pull --rebase
git push
```

---

**Q: Как отменить последний коммит?**

A: Зависит от того, что нужно:
```bash
# Отменить коммит, но сохранить изменения в файлах
git reset --soft HEAD~1

# Отменить коммит И удалить изменения
git reset --hard HEAD~1

# Если уже запушил — лучше сделать новый коммит с исправлением
```

---

**Q: Я случайно закоммитил пароль/секрет/ключ!**

A: СРОЧНО:
1. Сообщи менеджеру
2. Смени скомпрометированный пароль/ключ
3. История Git помнит всё — удаление файла не поможет
4. Нужна специальная процедура очистки истории

**Чтобы этого не случилось:**
- Храни секреты в `.env` файлах
- Добавь `.env` в `.gitignore`
- Никогда не коммить файлы с паролями

---

**Q: Как посмотреть историю изменений файла?**

A:
```bash
git log --oneline путь/к/файлу
git log -p путь/к/файлу    # с диффами
```

---

**Q: Конфликт при merge/pull — что делать?**

A:
1. Git покажет файлы с конфликтами
2. Открой их — увидишь метки:
```
<<<<<<< HEAD
твой код
=======
чужой код
>>>>>>> branch-name
```
3. Оставь правильный вариант, удали метки
4. `git add .` и `git commit`

---

### Sentry

**Q: Как подключить Telegram-уведомления?**

A:
1. Найди бота @itlabs_sentry_bot
2. Отправь /start
3. Нажми "Зарегистрироваться"
4. Введи свой email из Sentry

---

**Q: Мне приходят уведомления о чужих проектах**

A: Ты состоишь в команде Sentry, которой принадлежит этот проект. Если это ошибка — обратись к менеджеру.

---

**Q: Ошибка Resolved, но появилась снова**

A: Это **регрессия**. Sentry автоматически переоткрывает ошибку, если она повторяется после Resolve. Это нормально — значит баг не до конца исправлен.

---

**Q: Как узнать, какой коммит сломал код?**

A: В ошибке Sentry есть секция "Suspect Commits" — там показаны коммиты, которые могли вызвать ошибку.

---

**Q: Ошибка происходит только у некоторых пользователей**

A: Посмотри в Sentry:
- Tags → Browser/OS — может быть проблема в конкретном браузере
- Tags → url — может быть специфичная страница
- Events → посмотри разные события, сравни контекст

---

## Полезные ссылки

| Ресурс | URL |
|--------|-----|
| GitHub организации | https://github.com/IT-Labs-Top |
| Sentry | https://sentry.itlabs.top |
| Telegram-бот | @itlabs_sentry_bot |

---

## Нужна помощь?

1. Сначала поищи ответ в этой документации
2. Спроси коллегу из своей команды
3. Напиши менеджеру

---

*Версия документации: 1.0*
*Последнее обновление: Январь 2026*
